<!DOCTYPE html>
<html lang="en">
<head>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>National Homelessness</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  
  <style>
    .section {padding: 1em 0;} 

    .header {text-align: left;} 

    h1 {
      color:#355C7D;
      font-family: 'Open Sans Condensed', Helvetica, sans-serif;
      font-size: 300%;
    } 

    p {
      color:#355C7D;
      font-family: 'Open Sans Condensed', Helvetica, sans-serif;
      font-size: 90%;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      white-space: nowrap; 
      font-family: 'Open Sans Condensed', Helevetica, sans-serif;
      font-weight: 500;
      color: #F67280;
    }

    th { 
      background-color: #355C7D;
      font-family: 'Open Sans Condensed', Helvetica, sans-serif;
      color: white;
    }
    
    tr:nth-child(even) {background-color:#6C5B7B}

    tr:hover td{font-weight: bold;}

    body {background-color: #F8B195;}

    #data-table td {width: 25%;}

    .bar {height: 20px; background: #F67280;}
   </style>

</head>

<body>

  <div class="container">
    
    <div class="header">
      <h1>Homelessness in the United States</h1>
      <p>Data Source: National Alliance to End Homelessness</p>
    </div>
    
    <div class="controls section">
    <div class ="container">
      <div class="btn-group" role="group" aria-label="Sort">
        <button type="button" class="btn btn-default" id="sort-asc">Ascending</button>
        <button type="button" class="btn btn-default" id="sort-desc">Descending</button>
      </div>
    </div>
    </div>

    <div class="main section">
      <div class="container">
        <table class="table" id="data-table">
          <thead>
            <tr>
              <th>State</th>
              <th>2014 Rate per 10K</th>
              <th>Visualizing the Rate</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script>
      var states = [
        {"State":"AK","Rate":24.3},
        {"State":"AL","Rate":9.4},
        {"State":"AR","Rate":9.9},
        {"State":"AZ","Rate":15.8},
        {"State":"CA","Rate":29.7},
        {"State":"CO","Rate":19.0},
        {"State":"CT","Rate":12.4},
        {"State":"DC","Rate":120},
        {"State":"DE","Rate":9.7},
        {"State":"FL","Rate":21.2},
        {"State":"GA","Rate":16.5},
        {"State":"HI","Rate":49.3},
        {"State":"IA","Rate":10.1},
        {"State":"ID","Rate":13.1},
        {"State":"IL","Rate":10.2},
        {"State":"IN","Rate":9.1},
        {"State":"KS","Rate":9.6},
        {"State":"KY","Rate":11.6},
        {"State":"LA","Rate":10.0},
        {"State":"MA","Rate":31.7},
        {"State":"MD","Rate":13.3},
        {"State":"ME","Rate":20.5},
        {"State":"MI","Rate":12.4},
        {"State":"MN","Rate":15.5},
        {"State":"MO","Rate":12.0},
        {"State":"MS","Rate":7.4},
        {"State":"MT","Rate":17.2},
        {"State":"NC","Rate":11.7},
        {"State":"ND","Rate":17.4},
        {"State":"NE","Rate":16.2},
        {"State":"NH","Rate":10.4},
        {"State":"NJ","Rate":13.1},
        {"State":"NM","Rate":13.2},
        {"State":"NV","Rate":37.8},
        {"State":"NY","Rate":41.0},
        {"State":"OH","Rate":10.2},
        {"State":"OK","Rate":10.9},
        {"State":"OR","Rate":31.0},
        {"State":"PA","Rate":12.0},
        {"State":"PR","Rate":11.4},
        {"State":"RI","Rate":11.3},
        {"State":"SC","Rate":10.6},
        {"State":"SD","Rate":10.5},
        {"State":"TN","Rate":14.5},
        {"State":"TX","Rate":10.8},
        {"State":"UT","Rate":10.6},
        {"State":"VA","Rate":8.5},
        {"State":"VT","Rate":24.9},
        {"State":"WA","Rate":26.5},
        {"State":"WI","Rate":10.5},
        {"State":"WV","Rate":10.9},
        {"State":"WY","Rate":13.0}
      ]; 

      var MAX_RATE = 10000; 

      var options = {
      	sorted: false, 
      	filtered: false, 
      	page: 0
      }; 

      function updateTable() {

        var data = states.slice();
        if (options.sorted) {
        	if (options.sorted === 'acs') { 
        		data.sort(function (a,b) { return a.rate - b.rate; });
        	} else if (options.sorted === 'desc') {
        		data.sort(function (a,b) {return b.rate - a.rate; }); 
        	}
        }

        var table = document.getElementById('data-table'); 
        var tbody = table.getElementsByTagName('tbody') [0]; 

        tbody.innerHTML = ''; 

        data.forEach(function (d) {
          var row = document.createElement('tr'); 

          var state = document.createElement('td'); 
          state.innerHTML = d.state; 
          row.appendChild(state); 

          var rate = document.createElement('td'); 
          rate.innerHTML = d.rate; 
          row.appendChild(rate); 

          var barWrapper = document.createElement('td'); 
          var bar = document.createElement('div'); 
          bar.setAttribute('class', 'bar'); 

          var rateViz = d.rate; 
          bar.setAttribute('style', 'width: ' + rateViz); 

          barWrapper.appendChild(bar); 
          row.appendChild(barWrapper); 

          tbody.appendChild(row); 
        }); 

      }

      updateTable(); 

      document.getElementById('sort-asc').addEventListener('click', function ()
        {
        if (options.sorted === 'asc') {
      	    options.sorted = false; 
        }   else {
        	options.sorted = 'asc'; 
        }
        updateTable(); 
      }); 

      document.getElementById('sort-desc').addEventListener('click', function ()
        {
        if (options.sorted === 'desc') {
      	    options.sorted = false; 
        }   else {
        	options.sorted = 'desc'; 
        }
        updateTable(); 
      }); 

</script> 
</body>
</html>
